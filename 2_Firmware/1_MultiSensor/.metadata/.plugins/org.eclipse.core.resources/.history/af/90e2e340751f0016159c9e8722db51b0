 /*            #                                                   
             #@#@                                                   
          @@@#@@@                                                   
          @ `@@                                                     
          @@                                                        
          @@@                                                       
      .    @@                                                       
     @@@@. @@    @@          @@        @@,@;       @@  :@@@@@@@     
    @@@@@@@'@   @@@          #@`      '@  @@       @@  :@   .@@@.   
    @@@@@@@ @:  @@@           @@      @@  @@      `@:  :@`     @@   
    @@@@@@@@@@@@@@@           @@      @+  .@'     @@   :@`      @@  
    @@@@@@@@@@@@@@@           +@`    +@    @@     @@   :@`      @@  
    @@@@@@@@@@@@@@@            @@    @@    @@    `@.   :@`      @@  
    @@@@@@@@@@@@@@@            @@    @'     @#   @@    :@`      #@  
    @@@@@@@@@@@@@@@,           ;@.  +@      @@   @@    :@`      @@  
   @@@@@@@@@@@@@@@@@            @@  @@      #@  `@`    :@`      @@  
   @@@@@@@@@@@@@@@@@@           @@  @:       @# @@     :@`      @@  
  '@@@@@@@@@@@@@@@@@@           ,@,+@        @@ @@     :@`     ;@+  
  '@@@@+@@@@@@@@@@@@@            @@@@        +@`@      :@`    ,@@   
   @@@  @@@@@@ @@@@@#            @@@.         @@@      :@@@@@@@@    
        @@@@@@  :+:              `@@          @@+      `@@@@@@      
        @@@@@@                                                      
        @@@@@@                                                      
 */

/**
 * Valere Versnip Design 
 *
 * @project MultiSensor_bsp
 * @file rgbled.c
 * @author TimB
 * @date 21-mei-2016
 * @brief	Brief.
 *
 * Description
 */

/* ***********************************************************************************************************************************************
 * Include Files
 * ***********************************************************************************************************************************************
 */
#include "rgbled.h"
#include "color.h"

/*
 * ***********************************************************************************************************************************************
 * Defines
 * ***********************************************************************************************************************************************
 */


/*
 * ***********************************************************************************************************************************************
 * Local Members
 * ***********************************************************************************************************************************************
 */


/*
 * ***********************************************************************************************************************************************
 * Private Function Prototypes
 * ***********************************************************************************************************************************************
 */


/*
 * ***********************************************************************************************************************************************
 * Private Functions
 * ***********************************************************************************************************************************************
 */




/*
 * ***********************************************************************************************************************************************
 * Public Functions
 * ***********************************************************************************************************************************************
 */

status_t RGBLED_Init(rgbled_t *p_regbled, rgbled_config_t *p_config)
{
	status_t status = status_ok;


	return status;
}



/**
 * Update the rgbled color and dim value.
 *
 * This function sets the rgbled color by setting the pwm.
 * @param p_rgbled rgbled device
 * @param color wanted color (24Bits RGB)
 * @param dimming dimming value 0 - 100
 * @return	status_ok if succeeded (otherwise check status.h for details).
 */
status_t RGBLED_Update(rgbled_t *p_rgbled, uint32_t color, uint8_t dimming)
{
	status_t status = status_ok;
	uint8_t r,g,b;

	/* check if dimming is between 0-100 */
	if(dimming > 100)
	{
		status = rgbled_dimvalue;
	}
	if(status == status_ok)
	{
		p_rgbled->color = color;
		p_rgbled->currentdim = dimming;
		r = (uint8_t)((((color >> 16) | 0x00FF)*dimming)/100);
		g = (uint8_t)((((color >> 8) | 0x00FF)*dimming)/100);
		b = (uint8_t)((((color >> 0) | 0x00FF)*dimming)/100);

		status = PWM_setdutycycle(p_rgbled->p_pwm, p_rgbled->red_channel, r);
	}

	if(status == status_ok)
	{
		PWM_setdutycycle(p_rgbled->p_pwm, p_rgbled->green_channel, g);
	}
	if(status == status_ok)
	{
		PWM_setdutycycle(p_rgbled->p_pwm, p_rgbled->blue_channel, b);
	}

	return status;
}


/**
 * Turn off the led.
 *
 * This will in fact set RGB value to 0, and dimming also to 0.
 * @param p_rgbled rgbled device
 * @return	status_ok if succeeded (otherwise check status.h for details).
 */
status_t RGBLED_SetLedOff(rgbled_t *p_rgbled)
{
	status_t status = status_ok;
	status = RGBLED_SetColor(p_rgbled, COLOR_RGB_BLACK, 0);
	return status;
}

status_t RGBLED_SetLedOn(rgbled_t *p_rgbled, uint8_t dim)
{
	status_t status = status_ok;
	status = RGBLED_SetColor(p_rgbled, COLOR_RGB_BLACK, 0);
	return status;
}


/* End of file rgbled.c */
